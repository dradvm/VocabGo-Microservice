generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model user_follower {
  user_id                                              String       @db.Uuid
  follower_id                                          String       @db.Uuid
  created_at                                           DateTime?    @default(now()) @db.Timestamptz(6)
  user_profile_user_follower_follower_idTouser_profile user_profile @relation("user_follower_follower_idTouser_profile", fields: [follower_id], references: [user_id], onDelete: Cascade, onUpdate: NoAction)
  user_profile_user_follower_user_idTouser_profile     user_profile @relation("user_follower_user_idTouser_profile", fields: [user_id], references: [user_id], onDelete: Cascade, onUpdate: NoAction)

  @@id([user_id, follower_id])
}

model user_profile {
  user_id                                               String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  public_id                                             String          @unique @db.VarChar(50)
  avatar_url                                            String?
  birth_date                                            DateTime?       @db.Date
  gender                                                String?         @db.VarChar(10)
  created_at                                            DateTime?       @default(now()) @db.Timestamptz(6)
  updated_at                                            DateTime?       @default(now()) @db.Timestamptz(6)
  given_name                                            String          @db.VarChar(50)
  family_name                                           String          @db.VarChar(50)
  email                                                 String          @unique @db.VarChar(100)
  user_follower_user_follower_follower_idTouser_profile user_follower[] @relation("user_follower_follower_idTouser_profile")
  user_follower_user_follower_user_idTouser_profile     user_follower[] @relation("user_follower_user_idTouser_profile")
  user_wallet                                           user_wallet?
}

model user_wallet {
  user_id             String       @id @db.Uuid
  kp_points           Int?         @default(0)
  rubys               Int?         @default(0)
  energy              Int?         @default(0)
  updated_at          DateTime?    @default(now()) @db.Timestamptz(6)
  energy_last_updated DateTime?    @default(now()) @db.Timestamp(6)
  user_profile        user_profile @relation(fields: [user_id], references: [user_id], onDelete: Cascade, onUpdate: NoAction)
}
